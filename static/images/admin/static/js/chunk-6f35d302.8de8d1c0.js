(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f35d302"],{"75e6":function(e,t,s){var a={"./af":"5401","./af.js":"5401","./ar":"3c98","./ar-dz":"ea29","./ar-dz.js":"ea29","./ar-kw":"7dc7","./ar-kw.js":"7dc7","./ar-ly":"2378","./ar-ly.js":"2378","./ar-ma":"0f8e","./ar-ma.js":"0f8e","./ar-sa":"ae72","./ar-sa.js":"ae72","./ar-tn":"ab87","./ar-tn.js":"ab87","./ar.js":"3c98","./az":"5f1a","./az.js":"5f1a","./be":"d375","./be.js":"d375","./bg":"e242","./bg.js":"e242","./bm":"317e","./bm.js":"317e","./bn":"15f3","./bn-bd":"cfa9","./bn-bd.js":"cfa9","./bn.js":"15f3","./bo":"656a","./bo.js":"656a","./br":"1e62","./br.js":"1e62","./bs":"72a4","./bs.js":"72a4","./ca":"de05","./ca.js":"de05","./cs":"9740","./cs.js":"9740","./cv":"ecbc","./cv.js":"ecbc","./cy":"7d1c","./cy.js":"7d1c","./da":"3984","./da.js":"3984","./de":"799b","./de-at":"70c8","./de-at.js":"70c8","./de-ch":"6f05","./de-ch.js":"6f05","./de.js":"799b","./dv":"c56b","./dv.js":"c56b","./el":"c516","./el.js":"c516","./en-au":"fea5","./en-au.js":"fea5","./en-ca":"87cc","./en-ca.js":"87cc","./en-gb":"2300","./en-gb.js":"2300","./en-ie":"423f","./en-ie.js":"423f","./en-il":"a72f","./en-il.js":"a72f","./en-in":"ec58","./en-in.js":"ec58","./en-nz":"108a","./en-nz.js":"108a","./en-sg":"5a1c","./en-sg.js":"5a1c","./eo":"d9ed","./eo.js":"d9ed","./es":"247b","./es-do":"4bed","./es-do.js":"4bed","./es-mx":"9538","./es-mx.js":"9538","./es-us":"694c","./es-us.js":"694c","./es.js":"247b","./et":"ba4d","./et.js":"ba4d","./eu":"e903","./eu.js":"e903","./fa":"4217","./fa.js":"4217","./fi":"ce24","./fi.js":"ce24","./fil":"dd1e","./fil.js":"dd1e","./fo":"0cdf","./fo.js":"0cdf","./fr":"3fc8","./fr-ca":"a6cf","./fr-ca.js":"a6cf","./fr-ch":"5da2","./fr-ch.js":"5da2","./fr.js":"3fc8","./fy":"1bb2","./fy.js":"1bb2","./ga":"deeb","./ga.js":"deeb","./gd":"b44b","./gd.js":"b44b","./gl":"bb95","./gl.js":"bb95","./gom-deva":"dba6","./gom-deva.js":"dba6","./gom-latn":"0813","./gom-latn.js":"0813","./gu":"8f69","./gu.js":"8f69","./he":"7796","./he.js":"7796","./hi":"effe","./hi.js":"effe","./hr":"f499","./hr.js":"f499","./hu":"2c1a","./hu.js":"2c1a","./hy-am":"2d0d","./hy-am.js":"2d0d","./id":"6056","./id.js":"6056","./is":"e6d9","./is.js":"e6d9","./it":"1cdb","./it-ch":"3d50","./it-ch.js":"3d50","./it.js":"1cdb","./ja":"8220","./ja.js":"8220","./jv":"b969","./jv.js":"b969","./ka":"57d0","./ka.js":"57d0","./kk":"9d6b","./kk.js":"9d6b","./km":"e67d","./km.js":"e67d","./kn":"f15e","./kn.js":"f15e","./ko":"c0b1","./ko.js":"c0b1","./ku":"381b","./ku.js":"381b","./ky":"e0ba","./ky.js":"e0ba","./lb":"4d77","./lb.js":"4d77","./lo":"2bb8","./lo.js":"2bb8","./lt":"6aa8","./lt.js":"6aa8","./lv":"45df","./lv.js":"45df","./me":"9938","./me.js":"9938","./mi":"0a7a","./mi.js":"0a7a","./mk":"e498","./mk.js":"e498","./ml":"f9b4","./ml.js":"f9b4","./mn":"b441","./mn.js":"b441","./mr":"2a28","./mr.js":"2a28","./ms":"9721","./ms-my":"5def","./ms-my.js":"5def","./ms.js":"9721","./mt":"74dd","./mt.js":"74dd","./my":"df4f","./my.js":"df4f","./nb":"7634","./nb.js":"7634","./ne":"4e92","./ne.js":"4e92","./nl":"c215","./nl-be":"51a9","./nl-be.js":"51a9","./nl.js":"c215","./nn":"c0aa","./nn.js":"c0aa","./oc-lnc":"df67","./oc-lnc.js":"df67","./pa-in":"8aed","./pa-in.js":"8aed","./pl":"d5e5","./pl.js":"d5e5","./pt":"3a1a","./pt-br":"e947","./pt-br.js":"e947","./pt.js":"3a1a","./ro":"a741","./ro.js":"a741","./ru":"9585","./ru.js":"9585","./sd":"3e49","./sd.js":"3e49","./se":"550f","./se.js":"550f","./si":"2d73","./si.js":"2d73","./sk":"d6f6","./sk.js":"d6f6","./sl":"1d87","./sl.js":"1d87","./sq":"2be5","./sq.js":"2be5","./sr":"ddc3","./sr-cyrl":"6574","./sr-cyrl.js":"6574","./sr.js":"ddc3","./ss":"d489","./ss.js":"d489","./sv":"2f57","./sv.js":"2f57","./sw":"b18a","./sw.js":"b18a","./ta":"b055","./ta.js":"b055","./te":"75ac","./te.js":"75ac","./tet":"0846","./tet.js":"0846","./tg":"2270","./tg.js":"2270","./th":"02c9","./th.js":"02c9","./tk":"6f00","./tk.js":"6f00","./tl-ph":"a7ac","./tl-ph.js":"a7ac","./tlh":"30e7","./tlh.js":"30e7","./tr":"be75","./tr.js":"be75","./tzl":"5f93","./tzl.js":"5f93","./tzm":"a13a","./tzm-latn":"2f75","./tzm-latn.js":"2f75","./tzm.js":"a13a","./ug-cn":"8f43","./ug-cn.js":"8f43","./uk":"0730","./uk.js":"0730","./ur":"0e6f","./ur.js":"0e6f","./uz":"6872","./uz-latn":"3d07","./uz-latn.js":"3d07","./uz.js":"6872","./vi":"f14e","./vi.js":"f14e","./x-pseudo":"1379","./x-pseudo.js":"1379","./yo":"097b","./yo.js":"097b","./zh-cn":"0507","./zh-cn.js":"0507","./zh-hk":"1204","./zh-hk.js":"1204","./zh-mo":"a3d8","./zh-mo.js":"a3d8","./zh-tw":"cb74","./zh-tw.js":"cb74"};function o(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id="75e6"},8722:function(e,t,s){},8885:function(e,t,s){"use strict";var a=s("ea28"),o=s("bdfc"),i=s("7455"),n=/"/g,r=a("".replace);e.exports=function(e,t,s,a){var l=i(o(e)),c="<"+t;return""!==s&&(c+=" "+s+'="'+r(i(a),n,"&quot;")+'"'),c+">"+l+"</"+t+">"}},"924b":function(e,t,s){"use strict";s("8722")},"96ef":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-page"},[s("div",{staticClass:"content-nav"},[s("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{name:"ad"}}},[e._v("广告列表")]),s("el-breadcrumb-item",[e._v(e._s(e.infoForm.id?"编辑广告":"添加广告"))])],1),s("div",{staticClass:"operation-nav"},[s("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1),s("div",{staticClass:"content-main"},[s("div",{staticClass:"form-table-box"},[s("el-form",{ref:"infoForm",attrs:{rules:e.infoRules,model:e.infoForm,"label-width":"120px"}},[e.infoForm.image_url?s("el-form-item",{staticClass:"image-uploader-diy new-height",attrs:{label:"广告图片",prop:"image_url"}},[s("div",{staticClass:"index-image"},[e.infoForm.image_url?s("el-image",{staticClass:"image-show",attrs:{"preview-src-list":e.previewList,src:e.infoForm.image_url,fit:"cover"},on:{click:e.previewIndexImg}}):e._e(),s("div",{staticClass:"o-shadow",on:{click:e.delePicList}},[s("i",{staticClass:"el-icon-delete"})])],1)]):e._e(),e.infoForm.image_url?e._e():s("el-form-item",{attrs:{label:"广告图片",prop:"image_url"}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"file",action:e.qiniuZone,"on-success":e.handleSuccess,"before-upload":e.getQiniuToken,"auto-upload":!0,"list-type":"picture-card",data:e.picData,"http-request":e.uploadIndexImg}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),s("el-form-item",{attrs:{label:"商品类型"}},[s("el-radio-group",{model:{value:e.infoForm.link_type,callback:function(t){e.$set(e.infoForm,"link_type",t)},expression:"infoForm.link_type"}},[s("el-radio",{attrs:{label:0}},[e._v("商品id")]),s("el-radio",{attrs:{label:1}},[e._v("链接")])],1)],1),1==e.infoForm.link_type?s("el-form-item",{attrs:{label:"广告链接",prop:"link"}},[s("el-input",{staticClass:"link-input",model:{value:e.infoForm.link,callback:function(t){e.$set(e.infoForm,"link",t)},expression:"infoForm.link"}})],1):e._e(),0==e.infoForm.link_type?s("el-form-item",{attrs:{label:"商品id",prop:"link"}},[s("el-input",{staticClass:"id-input",model:{value:e.infoForm.goods_id,callback:function(t){e.$set(e.infoForm,"goods_id",t)},expression:"infoForm.goods_id"}}),s("el-popover",{attrs:{placement:"right"},model:{value:e.related_pop,callback:function(t){e.related_pop=t},expression:"related_pop"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.chooseRelateGoods,stripe:""}},[s("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),s("el-table-column",{attrs:{prop:"list_pic_url",label:"商品图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.row.list_pic_url,alt:""}})]}}],null,!1,2827108702)}),s("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"300px"}}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){return e.relateSelect(t.row.id)}}},[e._v("选择 ")])]}}],null,!1,1421910715)})],1),s("el-button",{attrs:{slot:"reference",type:"primary"},on:{click:e.relateGoodsClick},slot:"reference"},[e._v("添加关联商品")])],1)],1):e._e(),s("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[s("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期","default-time":"23:59:59"},model:{value:e.infoForm.end_time,callback:function(t){e.$set(e.infoForm,"end_time",t)},expression:"infoForm.end_time"}},[e._v(" > ")])],1),s("el-form-item",{attrs:{label:"排序",prop:"sort_order"}},[s("el-input-number",{attrs:{min:1,max:999},model:{value:e.infoForm.sort_order,callback:function(t){e.$set(e.infoForm,"sort_order",t)},expression:"infoForm.sort_order"}})],1),s("el-form-item",{attrs:{label:"广告启用"}},[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.infoForm.enabled,callback:function(t){e.$set(e.infoForm,"enabled",t)},expression:"infoForm.enabled"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitInfo}},[e._v("确定保存")]),s("el-button",{on:{click:e.goBackPage}},[e._v("取消")])],1)],1)],1)])])},o=[],i=(s("67ae"),s("2705"),s("d845"),s("a3be")),n=s("eb0e"),r=s.n(n),l=s("72ee"),c=s.n(l),d={data:function(){return{qiniuZone:"",root:"",fileList:[],infoForm:{id:0,image_url:"",link_type:0,enabled:0,end_time:"",goods_id:0,link:""},infoRules:{image_url:[{required:!0,message:"请输入广告图片",trigger:"blur"}],end_time:[{required:!0,message:"请选择时间",trigger:"blur"}]},picData:{token:""},url:"",chooseRelateGoods:[],related_pop:!1,previewList:[]}},methods:{handleSuccess:function(){},previewIndexImg:function(){var e=this;e.previewList=[],e.previewList.push(e.infoForm.image_url)},delePicList:function(){var e=this;e.$confirm("确定删除该图片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.infoForm.image_url=""})).catch((function(){}))},uploadIndexImg:function(e){var t=this,s=e.file;r()(s).then((function(e){var a={headers:{"Content-Type":"multipart/form-data"}},o=c()().format("YYYYMMDDHHmmssSSS")+Math.floor(100*Math.random())+s.name,i=new FormData;i.append("file",e.file),i.append("token",t.picData.token),i.append("key",o),t.$http.post(t.qiniuZone,i,a).then((function(e){t.handleUploadImageSuccess(e.data)}))})).catch((function(e){console.log(e)}))},handleUploadImageSuccess:function(e,t){var s=this.url;this.infoForm.image_url=s+e.key},relateSelect:function(e){console.log(e),this.infoForm.goods_id=e,this.related_pop=!1},relateGoodsClick:function(){var e=this;this.axios.post("ad/getallrelate",{id:this.infoForm.id}).then((function(t){0===t.data.errno&&(e.chooseRelateGoods=t.data.data)}))},test:function(){console.log(this.infoForm.end_time)},beforeAdRemove:function(){return this.$confirm("确定移除？")},adRemove:function(e,t){this.infoForm.image_url=""},getQiniuToken:function(){var e=this;this.axios.post("index/getQiniuToken").then((function(t){var s=t.data.data;console.log(s),e.picData.token=s.token,e.url=s.url}))},goBackPage:function(){this.$router.go(-1)},onSubmitInfo:function(){var e=this;console.log(this.infoForm);var t=this.infoForm.end_time;return 0==t?(this.$message({type:"error",message:"请选择时间"}),!1):0==this.infoForm.link_type&&0==this.infoForm.goods_id?(this.$message({type:"error",message:"请选择商品"}),!1):1==this.infoForm.link_type&&""==this.infoForm.link?(this.$message({type:"error",message:"请输入链接"}),!1):void this.$refs["infoForm"].validate((function(t){if(!t)return!1;e.axios.post("ad/store",e.infoForm).then((function(t){0===t.data.errno?(e.$message({type:"success",message:"保存成功"}),e.$router.go(-1)):100===t.data.errno?e.$message({type:"error",message:"该商品已经有广告关联"}):e.$message({type:"error",message:"保存失败"})}))}))},getInfo:function(){var e=this;if(this.infoForm.id<=0)return!1;var t=this;this.axios.get("ad/info",{params:{id:t.infoForm.id}}).then((function(s){var a=s.data.data;a.enabled=a.enabled?"1":"0",t.infoForm=a,t.infoForm.end_time=1e3*a.end_time;var o={name:a.name,url:a.image_url};e.fileList.push(o),console.log(e.infoForm)}))}},components:{},mounted:function(){this.infoForm.id=this.$route.query.id||0,this.getInfo(),this.root=i["a"].rootUrl,this.getQiniuToken(),this.qiniuZone=i["a"].qiniu}},f=d,m=(s("924b"),s("1805")),u=Object(m["a"])(f,a,o,!1,null,"69fca8eb",null);t["default"]=u.exports},a04e:function(e,t,s){"use strict";var a=s("cd29");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},d845:function(e,t,s){"use strict";var a=s("4241"),o=s("8885"),i=s("a04e");a({target:"String",proto:!0,forced:i("link")},{link:function(e){return o(this,"a","href",e)}})}}]);